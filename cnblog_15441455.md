---
title: Java TCP/ UDP ä¼ è¾“æ–‡ä»¶
date: 2021-10-23 02:38:00
categories:
- ç¬”è®°
- åšå®¢å›­
tags:
- åšå®¢å›­
- æ¬å®¶
- cnblogs
---
# [è¿™æ˜¯ğŸ‘‰Java TCP/ UDP ä¼ è¾“æ–‡ä»¶ğŸ‘ˆçš„æ‘˜è¦](../../../../2021/10/23/cnblog_15441455/)
<!--more-->
#Net [toc] ##URL ` URL url=new URL("http://www.swu.edu.cn/");` `InputStream
in= url.openStream();` ##URLConnection  ``` URL url=new
URL("http://www.swu.edu.cn/"); URLConnection con=URL.openConnection;
InputStream in= con.getInputStream(); ```  #TCP/UDP
TCPæ˜¯é¢å‘è¿æ¥çš„ä¼ è¾“åè®®ï¼ŒUDPæ˜¯æ²¡æœ‰å»ºç«‹è¿æ¥çš„ã€‚UDPå®¢æˆ·ç«¯åªç®¡å¾€æŒ‡å®šIPå’Œç«¯å£å‘é€æ•°æ®åŒ…ï¼ŒUDPæœåŠ¡å™¨åªç®¡æ¥å—ä»æŒ‡å®šç«¯å£æ¥å—æ•°æ®åŒ…ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯æƒ³è¦çš„å®¢æˆ·ç«¯å‘çš„æ•°æ®åŒ…éƒ½æ¥æ”¶ï¼Œå› ä¸ºåŒæ–¹ä¸çŸ¥é“å¯¹æ–¹çš„çŠ¶æ€ã€‚ä¸ç®¡å¯¹æ–¹æ˜¯å¦åœ¨çº¿ï¼Œéƒ½åªç®¡å‘å’Œæ”¶ã€‚
å®¢æˆ·ç«¯ç”¨DatagramPacketå¯¹è±¡æ¥å¯¹æ•°æ®åŒ…è¿›è¡Œå†™å…¥æ•°æ®ï¼Œå†ç”¨DatagramSocketæ•°æ®æŠ¥å¥—æ¥å­—å‘é€è¯¥æ•°æ®åŒ…ï¼›æœåŠ¡å™¨ç”¨DatagramSocketæ¥å—ç½‘ç»œå‘æ¥çš„æ•°æ®åŒ…ï¼Œå†DatagramPacketå¯¹è±¡æ‰“å¼€æ•°æ®åŒ…ï¼Œè¯»å–æ•°æ®ã€‚
ç”±äºUDPä¸ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Œæ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ä¼šæœ‰ä¸¢åŒ…äº§ç”Ÿ ##TCP: Socket/ServerSocket ###å®¢æˆ·ç«¯ ``` Socket
client = new Socket("localhost",8888) ; // å®¢æˆ·ç«¯è¿æœåŠ¡å™¨ BufferedReader buf = new
BufferedReader(new InputStreamReader(client.getInputStream())) ; // è¾“å…¥æµï¼Œä¹‹åç”¨äºè¯»å–
PrintStream out = new PrintStream(client.getOutputStream()) ; // è¾“å‡ºæµï¼Œå‘é€æ•°æ® ```
###æœåŠ¡å™¨ ``` ServerSocket ss=new ServerSocket(8888); Socket byclient =
ss.accept() ; // è¿™ä¸ªclientæ˜¯æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„socketï¼› æ³¨æ„åé¢IOæµï¼ï¼ï¼å¾—åˆ°è¿æ¥ï¼Œç¨‹åºè¿›å…¥åˆ°é˜»å¡çŠ¶æ€ out = new
PrintStream(byclient.getOutputStream()) ; //è¾“å‡ºæµ BufferedReader buf = new
BufferedReader(new InputStreamReader(byclient.getInputStream())) ;// è¾“å…¥æµ
ï¼ï¼ï¼æ³¨æ„å¯¹æ¯”ï¼å‡†å¤‡æ¥æ”¶å®¢æˆ·ç«¯çš„è¾“å…¥ä¿¡æ¯ ``` ####scanner | bufferedreader ``` BufferedReader input
= new BufferedReader(new InputStreamReader(System.in)) ; // æ¥æ”¶é”®ç›˜æ•°æ® Scanner
input=new Scanner(System.in) ``` ##UDP DatagramPacket DatagramSocket
//åªæœ‰ç‚¹å¯¹ç‚¹ï¼Œä¸åˆ†svï¼Œcltï¼ DatagramSocket skt=new DatagramSocket(8000);//æ¥æ”¶ç«¯
DatagramPacket box=new DatagramPacket(c,1024);//æ¥æ”¶å®¹å™¨ DatagramPacket pkt=new
DatagramPacket(b,b.length,InetAddress.getLocalHost(),8000);//å‘é€å®¹å™¨
skt.send(pkt) skt.receive(box) ###UDPä¼ è¾“æ–‡ä»¶ä»£ç  ä½¿ç”¨æ–¹æ³•ï¼šå…ˆè¿è¡Œæ¥æ”¶ç«¯ï¼Œå†è¿è¡Œå‘é€ç«¯
ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šæ¥æ”¶ç«¯éœ€è¦æ‰‹åŠ¨å…³é—­ï¼Œæ”¹äº†åŠå¤©è¿˜æ˜¯åªèƒ½ç”¨è¶…æ—¶æ¥é™åˆ¶ ` skt.setSoTimeout(5000);` ####å‘é€ç«¯ ```
import java.io.*; import java.io.InputStream; import java.net.*; class sender
{//sender public static void main(String[] args) throws Exception {
DatagramSocket skt=new DatagramSocket(6666);//???????reply? File f=new
File("bank.txt"); byte[] d=new byte[1024]; InputStream in = new
FileInputStream(f); ByteArrayOutputStream bos = new ByteArrayOutputStream();
while (in.read(d)!=-1) { DatagramPacket pkt=new
DatagramPacket(d,d.length,InetAddress.getLocalHost(),8000); skt.send(pkt); }
System.out.println("sent"); skt.close(); } } ``` ####æ¥æ”¶ç«¯ #####æ”¹ä¹‹å‰ ``` import
java.io.*; import java.net.*; class receive {//receiver public static void
main(String[] args) throws Exception { DatagramSocket skt=new
DatagramSocket(8000); byte c[]=new byte[1024]; DatagramPacket box=new
DatagramPacket(c,1024);//receive åˆ°c[] File f=new File("a.txt");
FileOutputStream fos= new FileOutputStream(f); int l=0; int x=0; while (l==0){
skt.receive(box); l=box.getLength(); if(box instanceof DatagramPacket){
fos.write(c,0,l); fos.flush(); System.out.println(l+"bytes"); x=l; l=0; } else
if(x>0){ //æ²¡ç”¨ break; } } System.out.println("ok"); } } ``` #####æ”¹å ``` import
java.io.*; import java.util.Scanner; import java.io.BufferedReader; import
java.io.InputStreamReader; import java.net.*; class receive {//receiver public
static void main(String[] args) throws SocketException, FileNotFoundException
{ DatagramSocket skt=new DatagramSocket(8000); byte c[]=new byte[1024];
DatagramPacket box=new DatagramPacket(c,1024);//receive åˆ°c[]
skt.setSoTimeout(5000);//!!!!!!!!!!!!! int l=0; try{ File f=new File("a.txt");
FileOutputStream fos= new FileOutputStream(f); while (true) {
skt.receive(box); // System.out.println(box); fos.write(c); fos.flush(); l++;
} } catch (IOException e) { skt.close(); e.printStackTrace();
System.out.println(l + "kb"); } } } ```


